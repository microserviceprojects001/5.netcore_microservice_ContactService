# 区别简单来说：

- AddJwtBearer: 用于 API 接受和保护令牌（通常是微服务间调用或 SPA）

- AddCookie + AddOpenIdConnect: 用于 传统 Web 应用的用户登录和会话管理

1. AddJwtBearer - API 保护方案
   用途：
   让您的 API 能够验证传入的 JWT 令牌

常用于：微服务间通信、SPA（单页应用）访问 API、移动应用访问 API

## 流程：

客户端（其他微服务、SPA 等）从 IdentityServer 获取令牌

客户端在 API 请求的 Authorization 头中包含令牌：Bearer <token>

您的 API 使用 AddJwtBearer 中间件验证令牌的签名、颁发者、有效期等

如果有效，将用户信息（声明）存入 HttpContext.User

## 特点：

无状态：不创建任何会话或 Cookie

只验证：不处理登录流程，只验证现有令牌

适合机器对机器通信

2. AddCookie + AddOpenIdConnect - Web 应用认证方案

## 用途：

让 传统 Web 应用（MVC/Razor Pages）处理用户登录

## 常用于：有服务器端渲染的 Web 应用，需要维护用户会话

## 流程：

1. 用户访问需要认证的页面

2. 应用重定向到 IdentityServer 登录页面

3. 用户登录并授权

4. dentityServer 重定向回应用，携带授权码

5. 应用用授权码换取访问令牌和 ID 令牌

6. 应用创建认证 Cookie 来维持会话

## 特点：

有状态：使用 Cookie 维持用户会话

处理完整登录流程：处理重定向、登录、换取令牌等

适合有 UI 的 Web 应用

# 我需要了解其中的联系呀，我的系统会有用户用 UI 登录系统呀，此时会走 AddCookie + AddOpenIdConnect 这个过程呗，那 用户肯定还是要发送请求访问 API 的呀
